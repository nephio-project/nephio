# Approval controller

The approval controller automatically takes a package from Draft to Proposed
and then to Published, according to a policy that is added as an annotation
to a PackageRevision.

Currently the only supported value is a built-in policy called `initial`, which
will publish a Draft if and only if:
- The package readiness gates are all True.
- There is not already a Published revision for the package.

This allows us to use it for initial approvals, but also allows us to then
create a new Draft and have it not be automatically published.

To enable this policy, annotate the package revision with
`approval.nephio.org/policy: initial`.

This controller will automatically delay taking any action for thirty seconds
after the creation of the package revision. This is due to some current issues
during the early lifecycle of a package generated by a PackageVariant. Hopefully
we will fix this soon and can relax the delay.

You can make this longer than thirty seconds by using the annotation
`approval.nephio.org/delay` and setting it to a duration string. For example,
setting `approval.nephio.org/delay: 2m` to require the revision to have
existed for at least two minutes before it is proposed and approved.

If you set it to less than 30s, a delay of 30s will be used.
